<!--booking.wxml-->
<view class="page">
  <view class="address-btn" bindtap="chooseAddress">选择地址</view>
  <form class="form" bindsubmit="formSubmit">
    <view class="section">
      <text class="title">联系人姓名</text>
      <input name="name" value="{{name}}" placeholder="填写联系人姓名"/>
    </view>
    <view class="section">
      <text class="title">联系人电话</text>
      <input name="phone" value="{{phone}}" placeholder="填写联系人电话"/>
    </view>
    <view class="section">
      <text class="title">预约时间</text>
      <input name="datetime" value="{{date}} {{time}}" hidden/>
      <view class="date-time">
        <picker mode="date" value="{{date}}" start="{{today}}" end="{{maxDate}}" bindchange="bindDateChange">
          <view class="picker date">{{date}}</view>
        </picker>
        <picker mode="time" value="{{time}}" start="09:00" end="21:00" bindchange="bindTimeChange">
          <view class="picker time">{{time}}</view>
        </picker>
      </view>
    </view>
    <view class="section">
      <text class="title">选择服务人员</text>
      <view class="workers">
        <block wx:for="{{workers}}" wx:key="id">
          <view class="worker-item {{selectedWorker == item.id ? 'selected' : ''}}" bindtap="selectWorker" data-workerid="{{item.id}}">
            <view class="worker-info">
              <image class="worker-avatar" src="{{item.avatar}}"></image>
              <view class="worker-details">
                <view class="worker-name">{{item.name}} <text class="worker-title">{{item.title}}</text></view>
                <view class="worker-stats">
                  <text>经验: {{item.experience}}</text>
                  <text>评分: {{item.rating}}⭐</text>
                  <text>完成单: {{item.completedOrders}}</text>
                </view>
                <view class="worker-specialties">
                  <text wx:for="{{item.specialties}}" wx:key="index" class="specialty-tag">{{item}}</text>
                </view>
              </view>
            </view>
            <view class="selected-icon" wx:if="{{selectedWorker == item.id}}">✓</view>
          </view>
        </block>
      </view>
    </view>
    <view class="section">
      <text class="title">联系人地址</text>
      <input name="address" value="{{address}}" placeholder="填写联系人地址"/>
    </view>
    <view class="section">
      <text class="title">备注</text>
      <textarea name="notes" placeholder="填写备注" />
    </view>
    <input name="id" value="{{id}}" hidden/>
    <input name="amount" value="{{amount}}" hidden/>
    <view class="ft-bar">
      <button formType="submit" class="send-btn">立即预约</button>
    </view>
  </form>
  <view class="form-ft">
    <text class="txt">服务定金￥{{amount}}</text>
  </view>
</view>

